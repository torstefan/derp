<endpoint name="authentication/users" hideEnabledColumn="1">
  <header>Users</header>
  <breadcrumb>
    <parent hidecurrent="False">accesscontrols</parent>
    <name>Users</name>
  </breadcrumb>
  <!-- not putting this on the homepage menu for now
  <menu name="system_configurations">
    <label>Users</label>
    <url>/manager/%(namespace)s/authentication/users</url>
    <description>Manage user settings, including password and email address.</description>
    <order>110</order>
  </menu>
  -->
  <elements>
    <element name="name" type="textfield" label="Username">
      <view name="list"/>
      <view name="create"/>
    </element>

    <element name="type" type="textfield" label="Authentication system">
      <view name="list"/>
    </element>

    <element name="realname" type="textfield" label="Full name">
      <key name="disableIfNotInEAIAttributes"/>
      <view name="list"/>
      <view name="edit"/>
      <view name="create"/>
    </element>
    <element name="email" type="textfield" label="Email address">
      <key name="disableIfNotInEAIAttributes"/>
      <view name="list"/>
      <view name="edit"/>
      <view name="create"/>
    </element>
    <element name="tz" type="select" label="Time zone">
      <key name="disableIfNotInEAIAttributes"/>
      <view name="list"/>
      <view name="edit"/>
      <view name="create"/>
      <key name="exampleText">Set a time zone for this user.</key>
      <options>
        <opt value="" label="-- Default System Timezone --"/>
        <opt value="GMT" label="(GMT) Greenwich Mean Time"/>
        <opt value="Pacific/Midway" label="(GMT-11:00) Midway Island, Samoa"/>
        <opt value="America/Adak" label="(GMT-10:00) Hawaii-Aleutian"/>
        <opt value="Pacific/Honolulu" label="(GMT-10:00) Hawaii"/>
        <opt value="Pacific/Marquesas" label="(GMT-09:30) Marquesas Islands"/>
        <opt value="Pacific/Gambier" label="(GMT-09:00) Gambier Islands"/>
        <opt value="America/Anchorage" label="(GMT-09:00) Alaska"/>
        <opt value="America/Ensenada" label="(GMT-08:00) Tijuana, Baja California"/>
        <opt value="Pacific/Pitcairn" label="(GMT-08:00) Pitcairn Islands"/>
        <opt value="America/Los_Angeles" label="(GMT-08:00) Pacific Time (US &amp; Canada)"/>
        <opt value="America/Denver" label="(GMT-07:00) Mountain Time (US &amp; Canada)"/>
        <opt value="America/Chihuahua" label="(GMT-07:00) Chihuahua, La Paz, Mazatlan"/>
        <opt value="America/Dawson_Creek" label="(GMT-07:00) Arizona"/>
        <opt value="America/Belize" label="(GMT-06:00) Saskatchewan, Central America"/>
        <opt value="America/Cancun" label="(GMT-06:00) Guadalajara, Mexico City, Monterrey"/>
        <opt value="Chile/EasterIsland" label="(GMT-06:00) Easter Island"/>
        <opt value="America/Chicago" label="(GMT-06:00) Central Time (US &amp; Canada)"/>
        <opt value="America/New_York" label="(GMT-05:00) Eastern Time (US &amp; Canada)"/>
        <opt value="America/Havana" label="(GMT-05:00) Cuba"/>
        <opt value="America/Bogota" label="(GMT-05:00) Bogota, Lima, Quito, Rio Branco"/>
        <opt value="America/Caracas" label="(GMT-04:30) Caracas"/>
        <opt value="America/Santiago" label="(GMT-04:00) Santiago"/>
        <opt value="America/La_Paz" label="(GMT-04:00) La Paz"/>
        <opt value="Atlantic/Stanley" label="(GMT-04:00) Faukland Islands"/>
        <opt value="America/Campo_Grande" label="(GMT-04:00) Brazil"/>
        <opt value="America/Goose_Bay" label="(GMT-04:00) Atlantic Time (Goose Bay)"/>
        <opt value="America/Glace_Bay" label="(GMT-04:00) Atlantic Time (Canada)"/>
        <opt value="America/St_Johns" label="(GMT-03:30) Newfoundland"/>
        <opt value="America/Araguaina" label="(GMT-03:00) UTC-3"/>
        <opt value="America/Montevideo" label="(GMT-03:00) Montevideo"/>
        <opt value="America/Miquelon" label="(GMT-03:00) Miquelon, St. Pierre"/>
        <opt value="America/Godthab" label="(GMT-03:00) Greenland"/>
        <opt value="America/Argentina/Buenos_Aires" label="(GMT-03:00) Buenos Aires"/>
        <opt value="America/Sao_Paulo" label="(GMT-03:00) Brasilia"/>
        <opt value="America/Noronha" label="(GMT-02:00) Mid-Atlantic"/>
        <opt value="Atlantic/Cape_Verde" label="(GMT-01:00) Cape Verde Is."/>
        <opt value="Atlantic/Azores" label="(GMT-01:00) Azores"/>
        <opt value="Europe/Belfast" label="(GMT) Greenwich Mean Time : Belfast"/>
        <opt value="Europe/Dublin" label="(GMT) Greenwich Mean Time : Dublin"/>
        <opt value="Europe/Lisbon" label="(GMT) Greenwich Mean Time : Lisbon"/>
        <opt value="Europe/London" label="(GMT) Greenwich Mean Time : London"/>
        <opt value="Africa/Abidjan" label="(GMT) Monrovia, Reykjavik"/>
        <opt value="Europe/Amsterdam" label="(GMT+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna"/>
        <opt value="Europe/Belgrade" label="(GMT+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague"/>
        <opt value="Europe/Brussels" label="(GMT+01:00) Brussels, Copenhagen, Madrid, Paris"/>
        <opt value="Africa/Algiers" label="(GMT+01:00) West Central Africa"/>
        <opt value="Africa/Windhoek" label="(GMT+01:00) Windhoek"/>
        <opt value="Asia/Beirut" label="(GMT+02:00) Beirut"/>
        <opt value="Africa/Cairo" label="(GMT+02:00) Cairo"/>
        <opt value="Asia/Gaza" label="(GMT+02:00) Gaza"/>
        <opt value="Africa/Blantyre" label="(GMT+02:00) Harare, Pretoria"/>
        <opt value="Asia/Jerusalem" label="(GMT+02:00) Jerusalem"/>
        <opt value="Asia/Damascus" label="(GMT+02:00) Syria"/>
        <opt value="Europe/Minsk" label="(GMT+03:00) Minsk"/>
        <opt value="Europe/Moscow" label="(GMT+03:00) Moscow, St. Petersburg, Volgograd"/>
        <opt value="Africa/Addis_Ababa" label="(GMT+03:00) Nairobi"/>
        <opt value="Asia/Tehran" label="(GMT+03:30) Tehran"/>
        <opt value="Asia/Dubai" label="(GMT+04:00) Abu Dhabi, Muscat"/>
        <opt value="Asia/Yerevan" label="(GMT+04:00) Yerevan"/>
        <opt value="Asia/Kabul" label="(GMT+04:30) Kabul"/>
        <opt value="Asia/Tashkent" label="(GMT+05:00) Tashkent"/>
        <opt value="Asia/Kolkata" label="(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi"/>
        <opt value="Asia/Katmandu" label="(GMT+05:45) Kathmandu"/>
        <opt value="Asia/Dhaka" label="(GMT+06:00) Astana, Dhaka"/>
        <opt value="Asia/Yekaterinburg" label="(GMT+06:00) Ekaterinburg"/>
        <opt value="Asia/Novosibirsk" label="(GMT+06:00) Novosibirsk"/>
        <opt value="Asia/Rangoon" label="(GMT+06:30) Yangon (Rangoon)"/>
        <opt value="Asia/Bangkok" label="(GMT+07:00) Bangkok, Hanoi, Jakarta"/>
        <opt value="Asia/Krasnoyarsk" label="(GMT+07:00) Krasnoyarsk"/>
        <opt value="Asia/Hong_Kong" label="(GMT+08:00) Beijing, Chongqing, Hong Kong, Urumqi"/>
        <opt value="Asia/Irkutsk" label="(GMT+08:00) Irkutsk, Ulaan Bataar"/>
        <opt value="Australia/Perth" label="(GMT+08:00) Perth"/>
        <opt value="Australia/Eucla" label="(GMT+08:45) Eucla"/>
        <opt value="Asia/Tokyo" label="(GMT+09:00) Osaka, Sapporo, Tokyo"/>
        <opt value="Asia/Seoul" label="(GMT+09:00) Seoul"/>
        <opt value="Asia/Yakutsk" label="(GMT+09:00) Yakutsk"/>
        <opt value="Australia/Adelaide" label="(GMT+09:30) Adelaide"/>
        <opt value="Australia/Darwin" label="(GMT+09:30) Darwin"/>
        <opt value="Australia/Brisbane" label="(GMT+10:00) Brisbane"/>
        <opt value="Australia/Hobart" label="(GMT+10:00) Hobart"/>
        <opt value="Asia/Vladivostok" label="(GMT+10:00) Vladivostok"/>
        <opt value="Australia/Lord_Howe" label="(GMT+10:30) Lord Howe Island"/>
        <opt value="GMT-1100" label="(GMT+11:00) Solomon Is., New Caledonia"/>
        <opt value="Asia/Magadan" label="(GMT+11:00) Magadan"/>
        <opt value="Pacific/Norfolk" label="(GMT+11:30) Norfolk Island"/>
        <opt value="Asia/Anadyr" label="(GMT+12:00) Anadyr, Kamchatka"/>
        <opt value="Pacific/Auckland" label="(GMT+12:00) Auckland, Wellington"/>
        <opt value="GMT-1200" label="(GMT+12:00) Fiji, Kamchatka, Marshall Is."/>
        <opt value="Pacific/Chatham" label="(GMT+12:45) Chatham Islands"/>
        <opt value="Pacific/Tongatapu" label="(GMT+13:00) Nuku Alofa"/>
        <opt value="Pacific/Kiritimati" label="(GMT+14:00) Kiritimati"/>
      </options>
    </element>
    <element name="defaultApp" type="select" label="Default app">
      <key name="disableIfNotInEAIAttributes"/>
      <view name="list"/>
      <view name="edit"/>
      <view name="create"/>
      <!-- Indicate if value is inherited from a role -->
      <!-- <key name="processValueList">value + ((" (inherited from role '" + entity.get('defaultAppSourceRole') + "')") if 'defaultAppSourceRole' in entity else '')</key> -->
      <!-- Prepopulate only if defaultApp comes from user override, i.e. is not inherited from a role -->
      <key name="processValueEdit">value if entity['defaultAppIsUserOverride'] == '1' else ''</key>
      <extraOptions>
        <opt value="" label=""/>
      </extraOptions>
      <key name="dynamicOptions" type="dict">
        <key name="keyName">"%s (%s)" % (title, entry['label'])</key>
        <key name="keyValue">title</key>
        <key name="splunkSource">/apps/local</key>
        <key name="splunkSourceParams" type="dict">
          <key name="search">'visible=true AND disabled=false'</key>
          <key name="count">-1</key>
        </key>
      </key>
      <key name="exampleText">Set a default app for this user. Setting this here overrides the default app inherited from the user's role(s).</key>
    </element>
    <element name="defaultAppSourceRole" type="textfield" label="Default app inherited from">
      <view name="list"/>
      <key name="processValueList">value if entity['defaultAppIsUserOverride'] == '0' else ''</key>
    </element>

    <element name="fieldset-roles" type="fieldset">
      <view name="edit"/>
      <view name="create"/>
      <view name="list"/>
      <elements>
        <element name="roles" type="accumulator" label="roles">
          <key name="disableIfNotInEAIAttributes"/>
          <view name="list"/>
          <view name="edit"/>
          <view name="create"/>
          <key name="processValueAdd">['user']</key>
          <key name="processValueList">', '.join(value) if isinstance(value, list) else value</key>
          <key name="dynamicOptions" type="dict">
            <key name="keyName">title</key>
            <key name="keyValue">title</key>
            <key name="splunkSource">/authorization/roles</key>
            <key name="splunkSourceParams" type="dict">
              <key name="count">-1</key>
            </key>
          </key>
        </element>

        <element name="createrole" type="checkbox" label="Create a role for this user">
          <view name="create"/>
        </element>

      </elements>
      <key name="helpText">Assign this user to one or more roles.  The user will inherit all the settings and capabilities from these roles.</key>
      <key name="legend">Assign to roles</key>
    </element>

    <element name="fieldset-password" type="fieldset">
      <view name="edit"/>
      <view name="create"/>
      <elements>
        <element name="password" type="password" label="Password">
          <key name="disableIfNotInEAIAttributes"/>
          <key name="processValueAdd">''</key>
          <key name="processValueEdit">''</key>
          <view name="edit"/>
          <view name="create"/>
        </element>
      </elements>
      <key name="legend">Set password</key>
    </element>
  </elements>
</endpoint>
